argo-cd:
  installCRDs: false
  fullnameOverride: argocd
  global:
    securityContext:
      fsGroup: 999
    image:
      tag: v2.1.1
  dex:
    enabled: true
    metrics:
      enabled: true
  server:
    metrics:
      enabled: true
    extraArgs:
      - --insecure
    affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchLabels:
                  app.kubernetes.io/name: argocd-server
              topologyKey: kubernetes.io/hostname
            weight: 100
          - podAffinityTerm:
              labelSelector:
                matchLabels:
                  app.kubernetes.io/part-of: argocd
              topologyKey: kubernetes.io/hostname
            weight: 5
    service:
      labels:
        app.kubernetes.io/component: server
        app.kubernetes.io/name: argocd-server
        app.kubernetes.io/part-of: argocd
      type: LoadBalancer
      servicePortHttpName: http
      servicePortHttp: 80
      servicePortHttpsName: https
      servicePortHttps: 443
      namedTargetPort: false 
    config:
      repositories: |
        - type: helm
          name: stable
          url: https://charts.helm.sh/stable
        - type: helm
          name: argo-cd
          url: https://argoproj.github.io/argo-helm
